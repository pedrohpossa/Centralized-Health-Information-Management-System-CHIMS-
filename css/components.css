/* ===================================================================
 * CSS DE COMPONENTES (components.css) - VERSÃO DEFINITIVA
 * Projeto: CHIMS
 * Descrição: Estilização premium para todos os componentes internos,
 * focada em clareza, interatividade e uma estética moderna e coesa.
 * =================================================================== */

/* --- 1. Cabeçalhos de Seção e Formulários --- */

/* Estilo para o header dentro do <main> (ex: Gerenciar Usuários) */
main > header {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-3);
    padding-bottom: var(--spacing-4);
    margin-bottom: var(--spacing-5);
    border-bottom: 1px solid var(--color-border);
}
main > header h1 {
    margin: 0;
}
main > header > a {
    /* Herda de .btn .btn-primary */
    display: inline-block;
    padding: 10px var(--spacing-3);
    border-radius: var(--border-radius);
    font-weight: 600;
    cursor: pointer;
    text-align: center;
    transition: var(--transition);
    background-color: var(--color-primary);
    color: var(--color-white);
    text-decoration: none;
    box-shadow: var(--shadow-sm);
}
main > header > a:hover {
    background-color: var(--color-primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

body > header > div:last-child {
    display: flex;
    align-items: center;
    gap: var(--spacing-4); /* Adiciona 24px de espaço entre os itens */
}

body > header img {
    height: 70px; /* Aumenta a altura de 35px para 40px */
}

/* Estilo para os formulários de filtro/busca */
main > section > form {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-3);
    align-items: flex-end;
    padding: var(--spacing-4);
    background-color: var(--color-white);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    margin-bottom: var(--spacing-5);
    border: 1px solid var(--color-border);
}

/* Formulários principais de cadastro/edição */
main > form {
    background-color: var(--color-white);
    padding: var(--spacing-5);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
}

fieldset {
    border: none;
    padding: 0;
    margin-bottom: var(--spacing-5);
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-4);
}
fieldset:first-of-type {
    border-top: none;
    padding-top: 0;
}
legend {
    font-family: var(--font-heading);
    font-size: 1.25rem;
    font-weight: 600;
    padding-right: var(--spacing-3);
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-4);
}

/* Aplica o estilo base a todos os botões de formulário */
main form button {
    display: inline-block;
    padding: 12px var(--spacing-4);
    border: 1px solid transparent;
    border-radius: var(--border-radius);
    font-family: var(--font-body);
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    text-align: center;
    transition: var(--transition);
    user-select: none;
    text-decoration: none;
}
main form button:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

/* Estilo para o botão principal de submissão */
main form button[type="submit"] {
    background-color: var(--color-primary);
    color: var(--color-white);
    box-shadow: 0 4px 15px -5px rgba(51, 136, 238, 0.5);
}
main form button[type="submit"]:hover {
    background-color: var(--color-primary-dark);
}

/* Customização de Rádios e Checkboxes */
input[type="radio"] {
    opacity: 0;
    position: fixed;
    width: 0;
}
label[for^="perfil-"] {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    padding: 12px var(--spacing-3);
    border: 2px solid var(--color-border);
    border-radius: var(--border-radius);
    transition: var(--transition);
}
label[for^="perfil-"]::before {
    content: '';
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid var(--color-border);
    margin-right: var(--spacing-2);
    transition: var(--transition);
}
label[for^="perfil-"]:hover {
    background-color: var(--color-bg);
    border-color: var(--color-primary);
}
input[type="radio"]:checked + label {
    border-color: var(--color-primary);
    background-color: var(--color-primary-light);
    color: var(--color-primary-dark);
    font-weight: 700;
}
input[type="radio"]:checked + label::before {
    border-color: var(--color-primary);
    background-color: var(--color-primary);
    box-shadow: inset 0 0 0 3px var(--color-white);
}

/* --- 2. Cards de Resumo (Dashboards) --- */
section[class*="cards"] {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-4);
    margin-bottom: var(--spacing-5);
}
section[class*="cards"] article,
.patient-info-header > div {
    background: var(--color-white);
    padding: var(--spacing-4);
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    border-left: 5px solid var(--color-primary);
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
}
section[class*="cards"] article:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: var(--shadow-md);
}
section[class*="cards"] h3 {
    font-size: 1rem;
    color: var(--color-text-secondary);
    font-weight: 600;
    margin-bottom: var(--spacing-2);
}
section[class*="cards"] p {
    font-size: 2.5rem;
    font-weight: 700;
    font-family: var(--font-heading);
    color: var(--color-text-primary);
    margin: var(--spacing-2) 0;
}


/* --- 3. Tabelas de Dados --- */
section > table {
    width: 100%;
    border-collapse: collapse;
    background-color: var(--color-white);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    overflow: hidden;
}
thead th {
    background-color: var(--color-bg);
    padding: var(--spacing-3);
    font-family: var(--font-heading);
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--color-text-secondary);
    text-align: left;
}
tbody tr {
    transition: background-color var(--transition);
}
tbody tr:hover {
    background-color: var(--color-primary-light);
}
tbody td {
    padding: var(--spacing-3);
    border-bottom: 1px solid var(--color-border);
    color: var(--color-text-secondary);
    vertical-align: middle;
}
tbody td:first-child {
    font-weight: 600;
    color: var(--color-text-primary);
}


/* --- 4. Linha do Tempo (Timeline) --- */
#prontuario-timeline,
#prontuario-timeline-container {
    position: relative;
    padding-left: var(--spacing-5);
    border-left: 3px solid #e9ecef;
}
#prontuario-timeline article,
#prontuario-timeline-container article {
    position: relative;
    margin-bottom: var(--spacing-5);
    padding: var(--spacing-4);
    background-color: var(--color-white);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
}
#prontuario-timeline article:hover,
#prontuario-timeline-container article:hover {
    box-shadow: var(--shadow-md);
    border-color: var(--color-primary-light);
}
#prontuario-timeline article::before,
#prontuario-timeline-container article::before {
    content: '';
    position: absolute;
    left: calc(-1 * var(--spacing-5) - 8px);
    top: 24px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: var(--color-primary);
    border: 3px solid var(--color-bg);
}
#prontuario-timeline article header,
#prontuario-timeline-container article header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-2);
}
#prontuario-timeline article h3,
#prontuario-timeline-container article h3 {
    margin-bottom: 0;
    color: var(--color-primary-dark);
}
#prontuario-timeline article time,
#prontuario-timeline-container article time {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--color-text-secondary);
}


/* --- 5. Cards de Receita --- */
#receitas-lista-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--spacing-4);
}
#receitas-lista-container article {
    background: var(--color-white);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: var(--transition);
    border: 1px solid var(--color-border);
}
#receitas-lista-container article:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
}
#receitas-lista-container article header,
#receitas-lista-container article > div,
#receitas-lista-container article footer {
    padding: var(--spacing-3) var(--spacing-4);
}
#receitas-lista-container article footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: var(--color-bg);
    border-top: 1px solid var(--color-border);
}


/* ===================================================================
   CORREÇÃO E ESTILO DOS MODAIS
   =================================================================== */

/*
 * REGRA PRINCIPAL PARA ESCONDER OS MODAIS
 * Alvo: qualquer <div> cujo id contenha a palavra "-modal".
 * Ação: Esconde o modal por padrão.
*/
div[id*="-modal"] {
    display: none; /* Esta é a linha que esconde os modais */
    position: fixed;
    z-index: 2000;
    inset: 0; /* Atalho para top: 0; right: 0; bottom: 0; left: 0; */
    background-color: rgba(33, 37, 41, 0.6);
    backdrop-filter: blur(5px);
    justify-content: center;
    align-items: center;
    padding: var(--spacing-4);
    animation: fadeIn 0.3s ease;
}

/* ===================================================================
   CORREÇÃO E ESTILO DOS MODAIS (VERSÃO COM GARANTIA)
   =================================================================== */

/*
 * REGRA PRINCIPAL PARA ESCONDER OS MODAIS
 * A adição de "!important" garante que esta regra sempre vença.
*/
div[id*="-modal"] {
    display: none !important; /* Esconde o modal por padrão, com prioridade máxima */
    position: fixed;
    z-index: 2000;
    inset: 0;
    background-color: rgba(33, 37, 41, 0.6);
    backdrop-filter: blur(5px);
    justify-content: center;
    align-items: center;
    padding: var(--spacing-4);
    animation: fadeIn 0.3s ease;
}

/* --- 1. CORREÇÃO CRÍTICA: MODAIS --- */
/* Remove todas as regras anteriores para modais e usa esta. */

/* Regra para ESCONDER os modais por padrão. */
div[id*="-modal"] {
    display: none !important; /* Garante que comecem escondidos */
    position: fixed;
    z-index: 2000;
    inset: 0;
    background-color: rgba(33, 37, 41, 0.7);
    backdrop-filter: blur(5px);
    justify-content: center;
    align-items: center;
    padding: var(--spacing-4);
    animation: fadeIn 0.3s ease;
}

/* ===================================================================
   CORREÇÃO DEFINITIVA PARA OS MODAIS
   =================================================================== */

/*
 * REGRA PARA ESCONDER OS MODAIS
 * Usa o seletor correto [id^="modal-"] que significa 'id que COMEÇA COM modal-'.
*/
div[id^="modal-"] {
    display: none !important; /* Garante que eles fiquem escondidos */
    position: fixed;
    z-index: 2000;
    inset: 0;
    background-color: rgba(33, 37, 41, 0.7);
    backdrop-filter: blur(5px);
    justify-content: center;
    align-items: center;
    padding: var(--spacing-4);
    animation: fadeIn 0.3s ease;
}

/*
 * REGRA PARA MOSTRAR O MODAL
 * A mesma lógica, mas com o seletor correto.
*/
div[id^="modal-"].is-visible {
    display: flex !important; /* Garante que eles apareçam quando a classe for adicionada */
}

/* O restante dos estilos para o conteúdo interno, que já estavam corretos */
div[id^="modal-"] > section {
    background-color: var(--color-white);
    padding: var(--spacing-5);
    border-radius: var(--border-radius);
    width: 100%;
    max-width: 700px;
    box-shadow: var(--shadow-lg);
    animation: slideUp 0.4s ease-out;
    max-height: 90vh;
    overflow-y: auto;
}

div[id^="modal-"] header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: var(--spacing-3);
    margin-bottom: var(--spacing-4);
    border-bottom: 1px solid var(--color-border);
}

div[id^="modal-"] header h2 {
    margin-bottom: 0;
}

div[id^="modal-"] button[data-action*="close"] {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-text-secondary);
    border: none;
    background: none;
    cursor: pointer;
    line-height: 1;
    transition: var(--transition);
}

div[id^="modal-"] button[data-action*="close"]:hover {
    color: var(--color-danger);
    transform: rotate(90deg);
}

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

button[data-action^="abrir-modal-"] {
    /* Estilos base herdados da classe .btn */
    display: inline-block;
    padding: 12px var(--spacing-4);
    border: 1px solid transparent;
    border-radius: var(--border-radius);
    font-family: var(--font-body);
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    text-align: center;
    transition: var(--transition);
    user-select: none;
    text-decoration: none;
    
    /* Estilos primários */
    background-color: var(--color-primary);
    color: var(--color-white);
    box-shadow: 0 4px 15px -5px rgba(51, 136, 238, 0.5);
}

/* Efeito de hover e clique */
button[data-action^="abrir-modal-"]:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    background-color: var(--color-primary-dark);
}

button[data-action^="abrir-modal-"]:active {
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
}

/* --- 7. Estados (Loading e Vazio) com Estilo --- */
#loading-state, #empty-state {
    text-align: center;
    padding: var(--spacing-6);
    color: var(--color-text-secondary);
}
#empty-state {
    background-color: var(--color-white);
    border-radius: var(--border-radius);
    border: 2px dashed var(--color-border);
    margin-top: var(--spacing-4);
}
#loading-state::after {
    content: '';
    display: block;
    margin: var(--spacing-3) auto 0;
    width: 40px;
    height: 40px;
    border: 4px solid var(--color-primary-light);
    border-top-color: var(--color-primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* --- 8. Paginação --- */
main > nav {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: var(--spacing-5);
    gap: var(--spacing-2);
}
main > nav a, main > nav span {
    padding: 8px 14px;
    border: 1px solid var(--color-border);
    background-color: var(--color-white);
    border-radius: var(--border-radius);
    color: var(--color-text-secondary);
    font-weight: 600;
}
main > nav a:hover {
    background-color: var(--color-primary-light);
    border-color: var(--color-primary-light);
    text-decoration: none;
}
main > nav span {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--color-white);
    box-shadow: var(--shadow-sm);
}